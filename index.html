<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coin Duel</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: repeating-linear-gradient(45deg, #003300, #003300 20px, #004d00 20px, #004d00 40px);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 20px;
    }

    h1 {
      margin: 10px 0;
    }

    .container {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      width: 100%;
      max-width: 1200px;
    }

    .side-panel {
      flex: 1;
      font-size: 0.9rem;
    }

    .game-area {
      flex: 2;
      background: #0d0d0d;
      padding: 20px;
      border-radius: 20px;
      border: 3px solid gold;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    button, select, input[type="number"] {
      margin: 5px;
      padding: 10px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }

    button {
      background-color: #228B22;
      color: white;
    }

    button:hover {
      background-color: #2ecc71;
    }

    .coin-display, .history, .stats, .princess, .skins {
      margin: 10px 0;
      background: #1c1c1c;
      padding: 10px;
      border-radius: 10px;
    }

    .princess {
      font-style: italic;
      font-size: 0.9rem;
      text-align: center;
      background: none;
    }

    .princess-pixel {
      width: 64px;
      height: 64px;
      image-rendering: pixelated;
      background-image: url('https://i.imgur.com/tVbT6Nd.png');
      background-size: contain;
      background-repeat: no-repeat;
      margin: 0 auto 5px;
    }

    .skin-option {
      display: inline-block;
      width: 30px;
      height: 30px;
      margin: 2px;
      border: 2px solid white;
      cursor: pointer;
    }

    .active-skin {
      border: 2px solid gold;
    }
  </style>
</head>
<body>
  <h1>ðŸ’° Coin Duel</h1>
  <div class="container">
    <div class="side-panel">
      <div class="coin-display" id="coinDisplay">ðŸ’µ Coins: 0</div>
      <div class="coin-display">ðŸ’³ Kredit: <input type="number" id="creditAmount" min="1" placeholder="Betrag" style="width: 70px;"> fÃ¼r <input type="number" id="roundsDelay" min="1" max="10" placeholder="Runden" style="width: 60px;"> Runden <button onclick="takeLoan()">Nehmen</button></div>
      <div class="stats" id="stats">ðŸ“Š Stats: 0W / 0L</div>
      <div class="skins">
        <div>ðŸŽ¨ Skin wÃ¤hlen:</div>
        <div id="skinsContainer"></div>
      </div>
    </div>
    <div class="game-area">
      <div class="princess">
        <div class="princess-pixel"></div>
        <div id="princessComment">Willkommen, Held!</div>
      </div>
      <div class="coin-display">
        Einsatz: <input type="number" id="bet" value="10" min="1" style="width: 60px;">
        <button onclick="startGame()">Ziehen</button>
      </div>
      <div id="scoreDisplay">ðŸŽ¯ Dein Punktestand: 0</div>
      <div id="botScore">ðŸ¤– Bot Punktestand: 0</div>
      <div class="history" id="history">ðŸ“œ Letzte Spiele:</div>
    </div>
  </div>

  <script>
    let coins = 100;
    let score = 0;
    let botScore = 0;
    let wins = 0, losses = 0;
    let round = 0;
    let loans = [];
    let currentSkin = '';
    const princessQuotes = [
      "Du schaffst das!",
      "Viel GlÃ¼ck!",
      "Pass auf den Bot auf!",
      "Nicht gierig werden!",
      "Mut steht dir gut!"
    ];

    const skins = [
      "#1abc9c", "#3498db", "#9b59b6", "#f1c40f",
      "#e67e22", "#e74c3c", "#ecf0f1", "#95a5a6"
    ];

    function updateUI() {
      document.getElementById("coinDisplay").textContent = `ðŸ’µ Coins: ${coins}`;
      document.getElementById("scoreDisplay").textContent = `ðŸŽ¯ Dein Punktestand: ${score}`;
      document.getElementById("botScore").textContent = `ðŸ¤– Bot Punktestand: ${botScore}`;
      document.getElementById("stats").textContent = `ðŸ“Š Stats: ${wins}W / ${losses}L`;
    }

    function randomName() {
      const names = ["Botty", "AIlex", "CyberMax", "RoboRalf", "Chip"];
      return names[Math.floor(Math.random() * names.length)];
    }

    function startGame() {
      const bet = parseInt(document.getElementById("bet").value);
      if (isNaN(bet) || bet <= 0 || bet > coins) return alert("UngÃ¼ltiger Einsatz.");

      coins -= bet;
      let yourScore = 0;
      let bot = randomName();
      let botPts = 0;
      let botCards = Math.floor(Math.random() * 10) + 1;

      for (let i = 0; i < botCards; i++) {
        botPts += Math.floor(Math.random() * 20) + 1;
        if (botPts >= 100) break;
      }

      while (yourScore < 100) {
        let draw = Math.floor(Math.random() * 20) + 1;
        if (yourScore + draw > 100) break;
        yourScore += draw;
      }

      score = yourScore;
      botScore = botPts;

      const princess = document.getElementById("princessComment");
      princess.textContent = princessQuotes[Math.floor(Math.random() * princessQuotes.length)];

      if ((yourScore > botPts && yourScore <= 100) || botPts > 100) {
        coins += Math.floor(bet * 1.5);
        wins++;
        addToHistory(`âœ… Gewonnen mit ${yourScore} gegen ${bot} (${botPts})`);
      } else {
        losses++;
        addToHistory(`âŒ Verloren mit ${yourScore} gegen ${bot} (${botPts})`);
      }

      updateLoans();
      updateUI();
    }

    function takeLoan() {
      const amount = parseInt(document.getElementById("creditAmount").value);
      const rounds = parseInt(document.getElementById("roundsDelay").value);
      if (amount > 0 && rounds > 0) {
        coins += amount;
        loans.push({ amount: Math.floor(amount * 1.01 * rounds), round: round + rounds });
        updateUI();
      }
    }

    function updateLoans() {
      round++;
      loans = loans.filter(loan => {
        if (loan.round === round) {
          coins -= loan.amount;
          addToHistory(`ðŸ’¸ RÃ¼ckzahlung: -${loan.amount} Coins`);
          return false;
        }
        return true;
      });
    }

    function addToHistory(entry) {
      const hist = document.getElementById("history");
      hist.innerHTML = `ðŸ“œ Letzte Spiele:<br>` + entry + '<br>' + hist.innerHTML.split('<br>').slice(1, 6).join('<br>');
    }

    function renderSkins() {
      const cont = document.getElementById("skinsContainer");
      skins.forEach(color => {
        const el = document.createElement("div");
        el.className = "skin-option";
        el.style.backgroundColor = color;
        el.onclick = () => {
          currentSkin = color;
          document.querySelectorAll('.skin-option').forEach(e => e.classList.remove('active-skin'));
          el.classList.add('active-skin');
          document.querySelector(".game-area").style.borderColor = color;
        };
        cont.appendChild(el);
      });
    }

    renderSkins();
    updateUI();
  </script>
</body>
</html>
